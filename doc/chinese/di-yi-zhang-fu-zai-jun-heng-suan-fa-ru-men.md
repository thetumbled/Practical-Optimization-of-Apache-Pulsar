# 第一章 负载均衡算法入门

得益于Pulsar存算分离的架构，Pulsar能够轻松切换负载到不同的计算节点broker，实现秒级的负载切换，从而给负载均衡模块的实现奠定了基础。负载均衡模块是Pulsar的一个核心基础组件，当需要扩容新的机器或者缩容机器时，它能够自动地将负载分摊到各个broker机器上，极大地降低了运维负担。

&#x20;

Kafka是很难做到负载均衡的，因为Kafka的**存储和计算耦合**，若要将负载转移至其他节点，必须复制当前节点上的存储数据，这一过程代价高昂，并且会占用宝贵的业务流量带宽。因此Kafka的扩缩容步骤很麻烦，通常需要运维团队来接入，且往往需要耗费大量时间进行数据拷贝，以便缓慢地将负载迁移到新节点。然而，像扩容这样的操作通常会在紧急情况下进行，这就造成了一个尴尬的局面：急需快速响应却无法迅速实现，只能焦急等待。

&#x20;

在本章节中，我们将首先对Pulsar负载均衡的基本原理进行初步探讨，并对不同算法的性能进行比较。接着，我们将阐述开发新的负载均衡算法——AvgShedder的原因。最后，我们将详细介绍AvgShedder在生产环境中的卓越表现及其配置方法，以指导用户根据自己的实际需求，正确地配置和使用AvgShedder。后续章节将对负载均衡算法进行更深入的分析。

&#x20;
